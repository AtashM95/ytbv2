# WF-02 — Research & Source Intake

## Purpose
Mənbələr toplanır və manifest topic bölməsinə əlavə edilir.

## Inputs
- Run Contract
- Research sources list (title, url, license)
- WF-10 `resolved_config`

## Outputs
- Run Contract yenilənmiş manifest

## Manifest update
- `topic.source_references` əlavə edilir.
- `timestamps.phase = research` və `timestamps.updated_at` yenilənir.
- `audit.change_log`-a “sources added” yazılır.

## Error handling
- URL formatı yanlış → `invalid_source_url`.
- License boş → `license_required`.
- Persist fail → retry (3 dəfə), sonra `update_failed`.
- Xəta baş verərsə `FAILED_WF_02`, `timestamps.phase = failed_wf_02` və audit qeyd yazılır.

## Test cases
1. Mənbələr əlavə edilir və `source_references` dolur.
2. License boş olduqda error qaytarılır.
3. Persist fail simulyasiyası retry siyasətini göstərir.
