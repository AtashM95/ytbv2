# WF-11 — Settings Panel

## Purpose
Konfiqurasiyaların və user preferences-ların idarəsi üçün form-based admin panel workflow-u.

## Inputs
- Form trigger (n8n Form Trigger node)
- User inputs via HTML form fields

## Form Fields
| Field | Type | Required | Options |
|-------|------|----------|---------|
| Channel Category | Dropdown | Yes | Tech & AI, Finance, Health, Education, Gaming, Cooking, Travel, Real Estate, Reviews, Pets, Custom |
| Primary Language | Dropdown | Yes | en, ar, tr, es, fr, de, pt, hi |
| Target Countries | Text | No | Comma-separated ISO codes (e.g., "US, UK, CA") |
| Default Video Length | Dropdown | Yes | Short (3-5 min), Medium (8-12 min), Long (15-20 min), Extra Long (25-40 min) |
| Video Quality | Dropdown | Yes | 720p HD, 1080p Full HD, 4K Ultra HD |
| Voice Quality | Dropdown | Yes | Standard, Premium |
| Male Voice ID | Text | No | ElevenLabs voice ID |
| Female Voice ID | Text | No | ElevenLabs voice ID |
| Auto-generate Thumbnails | Dropdown | Yes | Yes, No |
| SEO Optimization | Dropdown | Yes | Enabled, Disabled |
| Auto Tags | Dropdown | Yes | Enabled, Disabled |
| OpenAI Model | Dropdown | Yes | gpt-4o-mini, gpt-4o, gpt-4-turbo |
| OpenAI Temperature | Number | No | 0.0 - 1.0 |

## Outputs
- PostgreSQL upsert to `yt_studio_config` table
- Success/failure message to user

## Nodes plan
1. **Trigger: Form** — n8n FormTrigger node ilə web form render
2. **Node: Parse Form Data** — form field-lərini internal config format-ına çevirmək
3. **Node: Save Config to Database** — PostgreSQL upsert with `config_key: 'user_settings'`
4. **Node: Build Response** — success/failure message

## Database Schema
```sql
INSERT INTO yt_studio_config (config_key, config_value, is_active)
VALUES ('user_settings', '{"category": "tech_ai", ...}', true)
ON CONFLICT (config_key) DO UPDATE SET config_value = EXCLUDED.config_value;
```

## Mapping Logic
- Form labels → internal config keys:
  - "Tech & AI" → `tech_ai`
  - "English (en)" → `en`
  - "Short (3-5 min)" → `short_3_5`
  - "1080p Full HD" → `1080p`

## Error Handling
- DB connection failed → error message to user
- Invalid form data → validation error
- Successful save → "Settings saved successfully!"
