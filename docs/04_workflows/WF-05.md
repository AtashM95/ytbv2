# WF-05 — Voiceover Generation

## Purpose
Təsdiqlənmiş ssenari əsasında voiceover yaradılır, storage-a upload olunur və qalıcı URL qaytarılır.

## Inputs
- Run Contract (`manifest.content.script`, `manifest.production.voiceover`)
- WF-10 Get Config output (TTS və storage konfiqurasiyası)

## Outputs
- Run Contract `voiceover_url_signed` (qalıcı storage URL)
- Manifest `voiceover.voiceover_url_signed`
- Status: `VOICEOVER_GENERATED` və ya `FAILED_UPLOAD_VOICEOVER`

## Nodes plan
1. **Trigger: Event from WF-04** — script təsdiqi sonrası.
2. **Node: Get Config (WF-10)** — TTS və storage parametrləri.
3. **Node: Generate Voiceover** — ElevenLabs TTS çağırışı (response=file).
4. **Node: Prepare Upload** — binary tapılır və provider seçilir.
5. **Node: Upload (Cloudinary Unsigned/Signed)** — qalıcı storage URL alınır.
6. **Node: Upload (Generic HTTP)** — response `{ url }` çıxarılır.
7. **Node: Update Manifest** — `manifest.voiceover.voiceover_url_signed` set edilir.
8. **Node: Emit Event** — WF-06 üçün event.

## Error handling
- TTS provider error → `FAILED_TTS`.
- Storage upload fail → `FAILED_UPLOAD_VOICEOVER`.
- Invalid storage config → `FAILED_CONFIG_STORAGE`.

## Test cases
1. Voiceover yaradılır və `voiceover_url_signed` qalıcı URL-dir.
2. Cloudinary unsigned/signed fallback işləyir.
3. Upload fail olduqda `FAILED_UPLOAD_VOICEOVER` qaytarılır.
