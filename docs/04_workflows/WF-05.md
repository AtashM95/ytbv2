# WF-05 — Voiceover Generation

## Purpose
Təsdiqlənmiş ssenari əsasında voiceover yaradılır və imzalanmış URL hazırlanır.

## Inputs
- Run Contract (`manifest.content.script`, `manifest.production.voiceover`)
- WF-10 Get Config output (tts provider credentials)

## Outputs
- Run Contract `voiceover_url_signed`
- Manifest `status.checks.voiceover_ready = true`
- Manifest `status.phase = voiceover_ready`

## Nodes plan
1. **Trigger: Event from WF-04** — script təsdiqi sonrası.
2. **Node: Get Config (WF-10)** — TTS provider məlumatları.
3. **Node: Generate Voiceover** — TTS çağırışı.
4. **Node: Store Audio** — storage upload.
5. **Node: Sign URL** — imzalanmış link yaradılır.
6. **Node: Update Manifest** — status yenilənir.
7. **Node: Persist Run Update** — run yenilənir.
8. **Node: Emit Event** — WF-06 üçün event.

## Error handling
- TTS provider error → retry (2 dəfə), sonra `tts_failed`.
- Storage upload fail → retry (3 dəfə), sonra `storage_failed`.
- URL signing fail → `signing_failed`.

## Test cases
1. Voiceover yaradılır və `voiceover_url_signed` dolur.
2. TTS fail simulyasiyası retry ilə işləyir.
3. Storage upload fail simulyasiyası error status verir.
