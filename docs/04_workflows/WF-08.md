# WF-08 — Thumbnail Generator

## Purpose
DALL-E ilə thumbnail yaradılır, binar olaraq endirilir və storage-a upload edilərək qalıcı URL qaytarılır.

## Inputs
- Run Contract (`run_id`, `manifest`)
- WF-10 Get Config output (storage konfiqurasiyası)
- `selected_topic` / `manifest.topic` (prompt üçün)

## Outputs
- `thumbnail_url` — qalıcı storage URL
- Manifest `thumbnail.thumbnail_url`
- Status: `THUMBNAIL_GENERATED`, `THUMBNAIL_FALLBACK`, `FAILED_THUMBNAIL`, `FAILED_UPLOAD_THUMBNAIL`

## Nodes plan
1. **Trigger: Webhook** — `/webhook/wf-08-thumbnail`.
2. **Node: Prepare Thumbnail Prompt** — prompt hazırlanır.
3. **Node: Generate Thumbnail** — DALL-E request.
4. **Node: Download Thumbnail** — DALL-E URL binary download.
5. **Node: Upload Thumbnail** — Cloudinary (unsigned/signed) və ya generic HTTP.
6. **Node: Process Thumbnail** — URL və manifest update edilir.

## Error handling
- DALL-E error → fallback URL varsa `THUMBNAIL_FALLBACK`, yoxsa `FAILED_THUMBNAIL`.
- Upload fail → `FAILED_UPLOAD_THUMBNAIL`.
- Invalid storage config → `FAILED_CONFIG_STORAGE`.

## Test cases
1. DALL-E URL download olunur və `thumbnail_url` qalıcı URL olur.
2. Fallback işlədikdə status `THUMBNAIL_FALLBACK` olur.
3. Upload fail ssenarisində `FAILED_UPLOAD_THUMBNAIL` qaytarılır.
