# WF-06 — Scene Asset Build

## Purpose
Voiceover və script əsasında scene asset-lər hazırlanır və timeline yaradılır.

## Inputs
- Run Contract (`voiceover_url_signed`, `manifest.content`, `manifest.production.visual_style`)
- Asset sources (images/videos)
- WF-10 Get Config output

## Outputs
- Run Contract `scene_assets`
- Manifest `status.checks.assets_ready = true`
- Manifest `status.phase = assets_ready`

## Nodes plan
1. **Trigger: Event from WF-05** — voiceover hazır olduqda.
2. **Node: Get Config (WF-10)** — storage və asset parametrləri.
3. **Node: Fetch Asset List** — topic və script əsasında asset seçimi.
4. **Node: Download Assets** — source URL-lərdən download.
5. **Node: Verify Checksums** — SHA256 hesablanır.
6. **Node: Build Timeline** — scene plan və duration.
7. **Node: Update Run** — `scene_assets` list yazılır.
8. **Node: Persist Run Update** — run yenilənir.
9. **Node: Emit Event** — WF-07 üçün event.

## Error handling
- Asset download fail → retry (3 dəfə), sonra `asset_download_failed`.
- Checksum mismatch → `asset_integrity_failed`.
- Timeline build fail → `timeline_build_failed`.

## Test cases
1. Asset-lər yüklənir və `scene_assets` dolur.
2. Checksum mismatch olduqda error qaytarılır.
3. Timeline qurulmadıqda error status qaytarılır.
