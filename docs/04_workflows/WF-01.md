# WF-01 — Ideation Intake (Orchestrator)

## Purpose
Yeni run yaradılır və manifest-in topic bölməsi doldurulur.

## Inputs
- Admin/UI form submission (title, category, language, keywords, summary)
- WF-10 `resolved_config`

## Outputs
- Run Contract yeni `run_id` ilə
- Manifest `topic` və `timestamps.phase = ideation`

## Manifest update
- `topic` doldurulur.
- `timestamps.created_at`, `timestamps.updated_at`, `timestamps.phase` yenilənir.
- `audit.change_log`-a “run created” əlavə edilir.
- Workflow sonunda `manifest.final` doldurulur.

## Nodes plan
1. Trigger: Manual/UI
2. Get Config (WF-10)
3. Validate Input
4. Generate Run ID
5. Build Manifest
6. Persist Run
7. Emit Event → WF-02

## Error handling
- Input validation fail → `invalid_input`.
- Persist fail → retry (3 dəfə), sonra `run_persist_failed`.
- Event emit fail → retry (5 dəfə), sonra `event_emit_failed`.
- WF-10 fail → `FAILED_PRECONFIG`, `timestamps.phase = failed_preconfig` və workflow dayandırılır.
- Worker fail → `FAILED_AT_WF_XX`, `manifest.final.status = FAILED_AT_WF_XX` və workflow dayandırılır.

## Test cases
1. Valid input ilə run yaradılır və `timestamps.phase = ideation` olur.
2. `title` boş olduqda validation error qaytarılır.
3. Persist fail simulyasiyası retry siyasətini göstərir.
