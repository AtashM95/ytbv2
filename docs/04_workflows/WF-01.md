# WF-01 — Ideation Intake

## Purpose
Yeni video ideyasını qəbul edir, run yaradır və manifest-in ideation mərhələsini doldurur.

## Inputs
- Admin/UI form submission (topic, summary, keywords, category)
- WF-10 Get Config output

## Outputs
- Run Contract (yeni `run_id` ilə)
- Manifest `status.phase = ideation`

## Nodes plan
1. **Trigger: Manual/UI** — ideya dataları daxil edilir.
2. **Node: Get Config (WF-10)** — konfiqurasiyanı alın.
3. **Node: Validate Input** — topic, summary, keywords, category yoxlanır.
4. **Node: Generate Run ID** — unikal `run_id` yaradılır.
5. **Node: Build Manifest** — minimal manifest strukturu yaradılır.
6. **Node: Persist Run** — run payload DB/Storage-ə yazılır.
7. **Node: Emit Event** — downstream workflow-lar üçün event yaradılır.

## Error handling
- Input validation fail → `invalid_input` status və user-facing error.
- Storage failure → retry (3 dəfə), sonra `run_persist_failed`.
- Event emit fail → retry (5 dəfə), sonra `event_emit_failed` və manual alert.

## Test cases
1. Valid input ilə run yaradılır, `manifest.status.phase = ideation` olur.
2. `keywords` boş array verildikdə validation error qaytarılır.
3. Storage fail simulyasiya edilərək retry sayının işlədiyi yoxlanır.
4. Event emit fail olduqda alert log yaradılması yoxlanır.
